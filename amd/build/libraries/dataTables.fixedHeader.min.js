!function(factory){if("function"==typeof define&&define.amd)define("mod_interactivevideo/libraries/dataTables.fixedHeader",["jquery","mod_interactivevideo/libraries/datatables"],(function($){return factory($,window,document)}));else if("object"==typeof exports){var jq=require("jquery"),cjsRequires=function(root,$){$.fn.dataTable||require("mod_interactivevideo/libraries/datatables")(root,$)};"undefined"==typeof window?module.exports=function(root,$){return root||(root=window),$||($=jq(root)),cjsRequires(root,$),factory($,root,root.document)}:(cjsRequires(window,jq),module.exports=factory(jq,window,window.document))}else factory(jQuery,window,document)}((function($,window,document){var DataTable=$.fn.dataTable,_instCounter=0,FixedHeader=function(dt,config){if(!DataTable.versionCheck("2"))throw"Warning: FixedHeader requires DataTables 2 or newer";if(!(this instanceof FixedHeader))throw"FixedHeader must be initialised with the 'new' keyword.";!0===config&&(config={}),dt=new DataTable.Api(dt),this.c=$.extend(!0,{},FixedHeader.defaults,config),this.s={dt:dt,position:{theadTop:0,tbodyTop:0,tfootTop:0,tfootBottom:0,width:0,left:0,tfootHeight:0,theadHeight:0,windowHeight:$(window).height(),visible:!0},headerMode:null,footerMode:null,autoWidth:dt.settings()[0].oFeatures.bAutoWidth,namespace:".dtfc"+_instCounter++,scrollLeft:{header:-1,footer:-1},enable:!0,autoDisable:!1},this.dom={floatingHeader:null,thead:$(dt.table().header()),tbody:$(dt.table().body()),tfoot:$(dt.table().footer()),header:{host:null,floating:null,floatingParent:$('<div class="dtfh-floatingparent"><div></div></div>'),placeholder:null},footer:{host:null,floating:null,floatingParent:$('<div class="dtfh-floatingparent"><div></div></div>'),placeholder:null}},this.dom.header.host=this.dom.thead.parent(),this.dom.footer.host=this.dom.tfoot.parent();var dtSettings=dt.settings()[0];if(dtSettings._fixedHeader)throw"FixedHeader already initialised on table "+dtSettings.nTable.id;dtSettings._fixedHeader=this,this._constructor()};return $.extend(FixedHeader.prototype,{destroy:function(){var dom=this.dom;this.s.dt.off(".dtfc"),$(window).off(this.s.namespace),dom.header.rightBlocker&&dom.header.rightBlocker.remove(),dom.header.leftBlocker&&dom.header.leftBlocker.remove(),dom.footer.rightBlocker&&dom.footer.rightBlocker.remove(),dom.footer.leftBlocker&&dom.footer.leftBlocker.remove(),this.c.header&&this._modeChange("in-place","header",!0),this.c.footer&&dom.tfoot.length&&this._modeChange("in-place","footer",!0)},enable:function(enable,update,type){this.s.enable=enable,this.s.enableType=type,(update||void 0===update)&&(this._positions(),this._scroll(!0))},enabled:function(){return this.s.enable},headerOffset:function(offset){return void 0!==offset&&(this.c.headerOffset=offset,this.update()),this.c.headerOffset},footerOffset:function(offset){return void 0!==offset&&(this.c.footerOffset=offset,this.update()),this.c.footerOffset},update:function(force){var table=this.s.dt.table().node();(this.s.enable||this.s.autoDisable)&&($(table).is(":visible")?(this.s.autoDisable=!1,this.enable(!0,!1)):(this.s.autoDisable=!0,this.enable(!1,!1)),0!==$(table).children("thead").length&&(this._positions(),this._scroll(void 0===force||force),this._widths(this.dom.header),this._widths(this.dom.footer)))},_constructor:function(){var that=this,dt=this.s.dt;$(window).on("scroll"+this.s.namespace,(function(){that._scroll()})).on("resize"+this.s.namespace,DataTable.util.throttle((function(){that.s.position.windowHeight=$(window).height(),that.update()}),50));var autoHeader=$(".fh-fixedHeader");!this.c.headerOffset&&autoHeader.length&&(this.c.headerOffset=autoHeader.outerHeight());var autoFooter=$(".fh-fixedFooter");!this.c.footerOffset&&autoFooter.length&&(this.c.footerOffset=autoFooter.outerHeight()),dt.on("column-reorder.dt.dtfc column-visibility.dt.dtfc column-sizing.dt.dtfc responsive-display.dt.dtfc",(function(e,ctx){that.update()})).on("draw.dt.dtfc",(function(e,ctx){that.update(ctx!==dt.settings()[0])})),dt.on("destroy.dtfc",(function(){that.destroy()})),this._positions(),this._scroll()},_clone:function(item,force){var that=this,dt=this.s.dt,itemDom=this.dom[item],itemElement="header"===item?this.dom.thead:this.dom.tfoot;if("footer"!==item||!this._scrollEnabled())if(!force&&itemDom.floating)itemDom.floating.removeClass("fixedHeader-floating fixedHeader-locked");else{itemDom.floating&&(null!==itemDom.placeholder&&itemDom.placeholder.remove(),itemDom.floating.children().detach(),itemDom.floating.remove());var tableNode=$(dt.table().node()),scrollBody=$(tableNode.parent()),scrollEnabled=this._scrollEnabled();itemDom.floating=$(dt.table().node().cloneNode(!1)).attr("aria-hidden","true").css({top:0,left:0}).removeAttr("id"),itemDom.floatingParent.css({width:scrollBody[0].offsetWidth,overflow:"hidden",height:"fit-content",position:"fixed",left:scrollEnabled?tableNode.offset().left+scrollBody.scrollLeft():0}).css("header"===item?{top:this.c.headerOffset,bottom:""}:{top:"",bottom:this.c.footerOffset}).addClass("footer"===item?"dtfh-floatingparent-foot":"dtfh-floatingparent-head").appendTo("body").children().eq(0).append(itemDom.floating),this._stickyPosition(itemDom.floating,"-");var scrollLeftUpdate=function(){var scrollLeft=scrollBody.scrollLeft();that.s.scrollLeft={footer:scrollLeft,header:scrollLeft},itemDom.floatingParent.scrollLeft(that.s.scrollLeft.header)};scrollLeftUpdate(),scrollBody.off("scroll.dtfh").on("scroll.dtfh",scrollLeftUpdate),itemDom.floatingParent.children().css({width:"fit-content",paddingRight:that.s.dt.settings()[0].oBrowser.barWidth});let blocker=$("footer"===item?"div.dtfc-bottom-blocker":"div.dtfc-top-blocker",dt.table().container());blocker.length&&blocker.clone().appendTo(itemDom.floatingParent).css({position:"fixed",right:blocker.width()}),itemDom.placeholder=itemElement.clone(!1),itemDom.placeholder.find("*[id]").removeAttr("id"),itemDom.host.prepend(itemDom.placeholder),itemDom.floating.append(itemElement),this._widths(itemDom)}},_stickyPosition:function(el,sign){if(this._scrollEnabled()){var rtl="rtl"===$(this.s.dt.table().node()).css("direction");el.find("th").each((function(){if("sticky"===$(this).css("position")){var potential,right=$(this).css("right"),left=$(this).css("left");"auto"===right||rtl?"auto"!==left&&rtl&&(potential=+left.replace(/px/g,""),$(this).css("left",potential>0?potential:0)):(potential=+right.replace(/px/g,""),$(this).css("right",potential>0?potential:0))}}))}},_horizontal:function(item,scrollLeft){var itemDom=this.dom[item],lastScrollLeft=this.s.scrollLeft;if(itemDom.floating&&lastScrollLeft[item]!==scrollLeft){if(this._scrollEnabled()){var newScrollLeft=$($(this.s.dt.table().node()).parent()).scrollLeft();itemDom.floating.scrollLeft(newScrollLeft),itemDom.floatingParent.scrollLeft(newScrollLeft)}lastScrollLeft[item]=scrollLeft}},_modeChange:function(mode,item,forceChange){var itemDom=this.dom[item],position=this.s.position,scrollEnabled=this._scrollEnabled();if("footer"!==item||!scrollEnabled){var importantWidth=function(w){itemDom.floating[0].style.setProperty("width",w+"px","important"),scrollEnabled||itemDom.floatingParent[0].style.setProperty("width",w+"px","important")},tablePart=this.dom["footer"===item?"tfoot":"thead"],focus=$.contains(tablePart[0],document.activeElement)?document.activeElement:null,scrollBody=$($(this.s.dt.table().node()).parent());if("in-place"===mode)itemDom.placeholder&&(itemDom.placeholder.remove(),itemDom.placeholder=null),"header"===item?itemDom.host.prepend(tablePart):itemDom.host.append(tablePart),itemDom.floating&&(itemDom.floating.remove(),itemDom.floating=null,this._stickyPosition(itemDom.host,"+")),itemDom.floatingParent&&(itemDom.floatingParent.find("div.dtfc-top-blocker").remove(),itemDom.floatingParent.remove()),$($(itemDom.host.parent()).parent()).scrollLeft(scrollBody.scrollLeft());else if("in"===mode){this._clone(item,forceChange);var shuffle,scrollOffset=scrollBody.offset(),windowTop=$(document).scrollTop(),windowBottom=windowTop+$(window).height(),bodyTop=scrollEnabled?scrollOffset.top:position.tbodyTop,bodyBottom=scrollEnabled?scrollOffset.top+scrollBody.outerHeight():position.tfootTop;shuffle="footer"===item?bodyTop>windowBottom?position.tfootHeight:bodyTop+position.tfootHeight-windowBottom:windowTop+this.c.headerOffset+position.theadHeight-bodyBottom;var prop="header"===item?"top":"bottom",val=this.c[item+"Offset"]-(shuffle>0?shuffle:0);itemDom.floating.addClass("fixedHeader-floating"),itemDom.floatingParent.css(prop,val).css({left:position.left,"z-index":3}),importantWidth(position.width),"footer"===item&&itemDom.floating.css("top","")}else"below"===mode?(this._clone(item,forceChange),itemDom.floating.addClass("fixedHeader-locked"),itemDom.floatingParent.css({position:"absolute",top:position.tfootTop-position.theadHeight,left:position.left+"px"}),importantWidth(position.width)):"above"===mode&&(this._clone(item,forceChange),itemDom.floating.addClass("fixedHeader-locked"),itemDom.floatingParent.css({position:"absolute",top:position.tbodyTop,left:position.left+"px"}),importantWidth(position.width));focus&&focus!==document.activeElement&&setTimeout((function(){focus.focus()}),10),this.s.scrollLeft.header=-1,this.s.scrollLeft.footer=-1,this.s[item+"Mode"]=mode}},_positions:function(){var dt=this.s.dt,table=dt.table(),position=this.s.position,dom=this.dom,tableNode=$(table.node()),scrollEnabled=this._scrollEnabled(),thead=$(dt.table().header()),tfoot=$(dt.table().footer()),tbody=dom.tbody,scrollBody=tableNode.parent();position.visible=tableNode.is(":visible"),position.width=tableNode.outerWidth(),position.left=tableNode.offset().left,position.theadTop=thead.offset().top,position.tbodyTop=scrollEnabled?scrollBody.offset().top:tbody.offset().top,position.tbodyHeight=scrollEnabled?scrollBody.outerHeight():tbody.outerHeight(),position.theadHeight=thead.outerHeight(),position.theadBottom=position.theadTop+position.theadHeight,position.tfootTop=position.tbodyTop+position.tbodyHeight,tfoot.length?(position.tfootBottom=position.tfootTop+tfoot.outerHeight(),position.tfootHeight=tfoot.outerHeight()):(position.tfootBottom=position.tfootTop,position.tfootHeight=0)},_scroll:function(forceChange){if(!this.s.dt.settings()[0].bDestroying){var headerMode,footerMode,scrollEnabled=this._scrollEnabled(),scrollBody=$(this.s.dt.table().node()).parent(),scrollOffset=scrollBody.offset(),scrollHeight=scrollBody.outerHeight(),windowLeft=$(document).scrollLeft(),windowTop=$(document).scrollTop(),windowBottom=$(window).height()+windowTop,position=this.s.position,bodyTop=scrollEnabled?scrollOffset.top:position.tbodyTop,bodyLeft=scrollEnabled?scrollOffset.left:position.left,bodyBottom=scrollEnabled?scrollOffset.top+scrollHeight:position.tfootTop,bodyWidth=scrollEnabled?scrollBody.outerWidth():position.tbodyWidth;this.c.header&&(this.s.enable?!position.visible||windowTop+this.c.headerOffset+position.theadHeight<=bodyTop?headerMode="in-place":windowTop+this.c.headerOffset+position.theadHeight>bodyTop&&windowTop+this.c.headerOffset+position.theadHeight<bodyBottom?(headerMode="in",windowTop+this.c.headerOffset+position.theadHeight>bodyBottom||void 0===this.dom.header.floatingParent?forceChange=!0:this.dom.header.floatingParent.css({top:this.c.headerOffset,position:"fixed"}).children().eq(0).append(this.dom.header.floating)):headerMode="below":headerMode="in-place",(forceChange||headerMode!==this.s.headerMode)&&this._modeChange(headerMode,"header",forceChange),this._horizontal("header",windowLeft));var header={offset:{top:0,left:0},height:0},footer={offset:{top:0,left:0},height:0};if(this.c.footer&&this.dom.tfoot.length&&this.dom.tfoot.find("th, td").length){this.s.enable?!position.visible||position.tfootBottom+this.c.footerOffset<=windowBottom?footerMode="in-place":bodyBottom+position.tfootHeight+this.c.footerOffset>windowBottom&&bodyTop+this.c.footerOffset<windowBottom?(footerMode="in",forceChange=!0):footerMode="above":footerMode="in-place",(forceChange||footerMode!==this.s.footerMode)&&this._modeChange(footerMode,"footer",forceChange),this._horizontal("footer",windowLeft);var getOffsetHeight=function(el){return{offset:el.offset(),height:el.outerHeight()}};if(header=this.dom.header.floating?getOffsetHeight(this.dom.header.floating):getOffsetHeight(this.dom.thead),footer=this.dom.footer.floating?getOffsetHeight(this.dom.footer.floating):getOffsetHeight(this.dom.tfoot),scrollEnabled&&footer.offset.top>windowTop){var overlap=windowTop-scrollOffset.top,newHeight=windowBottom+(overlap>-header.height?overlap:0)-(header.offset.top+(overlap<-header.height?header.height:0)+footer.height);newHeight<0&&(newHeight=0),scrollBody.outerHeight(newHeight),Math.round(scrollBody.outerHeight())>=Math.round(newHeight)?$(this.dom.tfoot.parent()).addClass("fixedHeader-floating"):$(this.dom.tfoot.parent()).removeClass("fixedHeader-floating")}}if(this.dom.header.floating&&this.dom.header.floatingParent.css("left",bodyLeft-windowLeft),this.dom.footer.floating&&this.dom.footer.floatingParent.css("left",bodyLeft-windowLeft),void 0!==this.s.dt.settings()[0]._fixedColumns){var adjustBlocker=function(side,end,el){if(void 0===el){var blocker=$("div.dtfc-"+side+"-"+end+"-blocker");el=0===blocker.length?null:blocker.clone().css("z-index",1)}return null!==el&&("in"===headerMode||"below"===headerMode?el.appendTo("body").css({top:"top"===end?header.offset.top:footer.offset.top,left:"right"===side?bodyLeft+bodyWidth-el.width():bodyLeft}):el.detach()),el};this.dom.header.rightBlocker=adjustBlocker("right","top",this.dom.header.rightBlocker),this.dom.header.leftBlocker=adjustBlocker("left","top",this.dom.header.leftBlocker),this.dom.footer.rightBlocker=adjustBlocker("right","bottom",this.dom.footer.rightBlocker),this.dom.footer.leftBlocker=adjustBlocker("left","bottom",this.dom.footer.leftBlocker)}}},_scrollEnabled:function(){var oScroll=this.s.dt.settings()[0].oScroll;return""!==oScroll.sY||""!==oScroll.sX},_widths:function(itemDom){if(itemDom&&itemDom.placeholder){var tableNode=$(this.s.dt.table().node()),scrollBody=$(tableNode.parent());itemDom.floatingParent.css("width",scrollBody[0].offsetWidth),itemDom.floating.css("width",tableNode[0].offsetWidth),$("colgroup",itemDom.floating).remove();for(var cols=itemDom.placeholder.parent().find("colgroup").clone().appendTo(itemDom.floating).find("col"),widths=this.s.dt.columns(":visible").widths(),i=0;i<widths.length;i++)cols.eq(i).css("width",widths[i])}}}),FixedHeader.version="4.0.1",FixedHeader.defaults={header:!0,footer:!1,headerOffset:0,footerOffset:0},$.fn.dataTable.FixedHeader=FixedHeader,$.fn.DataTable.FixedHeader=FixedHeader,$(document).on("init.dt.dtfh",(function(e,settings,json){if("dt"===e.namespace){var init=settings.oInit.fixedHeader,defaults=DataTable.defaults.fixedHeader;if((init||defaults)&&!settings._fixedHeader){var opts=$.extend({},defaults,init);!1!==init&&new FixedHeader(settings,opts)}}})),DataTable.Api.register("fixedHeader()",(function(){})),DataTable.Api.register("fixedHeader.adjust()",(function(){return this.iterator("table",(function(ctx){var fh=ctx._fixedHeader;fh&&fh.update()}))})),DataTable.Api.register("fixedHeader.enable()",(function(flag){return this.iterator("table",(function(ctx){var fh=ctx._fixedHeader;flag=void 0===flag||flag,fh&&flag!==fh.enabled()&&fh.enable(flag)}))})),DataTable.Api.register("fixedHeader.enabled()",(function(){if(this.context.length){var fh=this.context[0]._fixedHeader;if(fh)return fh.enabled()}return!1})),DataTable.Api.register("fixedHeader.disable()",(function(){return this.iterator("table",(function(ctx){var fh=ctx._fixedHeader;fh&&fh.enabled()&&fh.enable(!1)}))})),$.each(["header","footer"],(function(i,el){DataTable.Api.register("fixedHeader."+el+"Offset()",(function(offset){var ctx=this.context;return void 0===offset?ctx.length&&ctx[0]._fixedHeader?ctx[0]._fixedHeader[el+"Offset"]():void 0:this.iterator("table",(function(ctx){var fh=ctx._fixedHeader;fh&&fh[el+"Offset"](offset)}))}))})),DataTable}));

//# sourceMappingURL=dataTables.fixedHeader.min.js.map