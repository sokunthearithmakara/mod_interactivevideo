!function(factory){if("function"==typeof define&&define.amd)define("mod_interactivevideo/libraries/dataTables.fixedColumns",["jquery","mod_interactivevideo/libraries/datatables"],(function($){return factory($,window,document)}));else if("object"==typeof exports){var jq=require("jquery"),cjsRequires=function(root,$){$.fn.dataTable||require("mod_interactivevideo/libraries/datatables")(root,$)};"undefined"==typeof window?module.exports=function(root,$){return root||(root=window),$||($=jq(root)),cjsRequires(root,$),factory($,root,root.document)}:(cjsRequires(window,jq),module.exports=factory(jq,window,window.document))}else factory(jQuery,window,document)}((function($,window,document){var DataTable=$.fn.dataTable;return function(){var $$1,DataTable$1;var FixedColumns=function(){function FixedColumns(settings,opts){var _this=this;if(!DataTable$1||!DataTable$1.versionCheck||!DataTable$1.versionCheck("2"))throw new Error("FixedColumns requires DataTables 2 or newer");var table=new DataTable$1.Api(settings);this.classes=$$1.extend(!0,{},FixedColumns.classes),this.c=$$1.extend(!0,{},FixedColumns.defaults,opts),this.s={dt:table,rtl:"rtl"===$$1(table.table().node()).css("direction")},opts&&void 0!==opts.leftColumns&&(opts.left=opts.leftColumns),opts&&void 0!==opts.left&&(this.c[this.s.rtl?"end":"start"]=opts.left),opts&&void 0!==opts.rightColumns&&(opts.right=opts.rightColumns),opts&&void 0!==opts.right&&(this.c[this.s.rtl?"start":"end"]=opts.right),this.dom={bottomBlocker:$$1("<div>").addClass(this.classes.bottomBlocker),topBlocker:$$1("<div>").addClass(this.classes.topBlocker),scroller:$$1("div.dt-scroll-body",this.s.dt.table().container())},this.s.dt.settings()[0]._bInitComplete?(this._addStyles(),this._setKeyTableListener()):table.one("init.dt.dtfc",(function(){_this._addStyles(),_this._setKeyTableListener()})),table.on("column-sizing.dt.dtfc column-reorder.dt.dtfc draw.dt.dtfc",(function(){return _this._addStyles()}));var debounced=DataTable$1.util.debounce((function(){_this._addStyles()}),50);return table.on("column-visibility.dt.dtfc",(function(){debounced()})),this.dom.scroller.on("scroll.dtfc",(function(){return _this._scroll()})),this._scroll(),table.settings()[0]._fixedColumns=this,table.on("destroy",(function(){return _this._destroy()})),this}return FixedColumns.prototype.end=function(newVal){return void 0!==newVal?(newVal>=0&&newVal<=this.s.dt.columns().count()&&(this.c.end=newVal,this._addStyles()),this):this.c.end},FixedColumns.prototype.left=function(count){return this.s.rtl?this.end(count):this.start(count)},FixedColumns.prototype.right=function(count){return this.s.rtl?this.start(count):this.end(count)},FixedColumns.prototype.start=function(newVal){return void 0!==newVal?(newVal>=0&&newVal<=this.s.dt.columns().count()&&(this.c.start=newVal,this._addStyles()),this):this.c.start},FixedColumns.prototype._addStyles=function(){var dt=this.s.dt,that=this,colCount=this.s.dt.columns(":visible").count(),headerStruct=dt.table().header.structure(":visible"),footerStruct=dt.table().footer.structure(":visible"),widths=dt.columns(":visible").widths().toArray(),wrapper=$$1(dt.table().node()).closest("div.dt-scroll"),scroller=$$1(dt.table().node()).closest("div.dt-scroll-body")[0],rtl=this.s.rtl,start=this.c.start,end=this.c.end,left=rtl?end:start,right=rtl?start:end,barWidth=dt.settings()[0].oBrowser.barWidth;if(0===wrapper.length)return this;scroller.offsetWidth===scroller.clientWidth&&(barWidth=0),dt.columns().every((function(colIdx){var offset,visIdx=dt.column.index("toVisible",colIdx);null!==visIdx&&(visIdx<start?(offset=that._sum(widths,visIdx),that._fixColumn(visIdx,offset,"start",headerStruct,footerStruct,barWidth)):visIdx>=colCount-end?(offset=that._sum(widths,colCount-visIdx-1,!0),that._fixColumn(visIdx,offset,"end",headerStruct,footerStruct,barWidth)):that._fixColumn(visIdx,0,"none",headerStruct,footerStruct,barWidth))})),$$1(dt.table().node()).toggleClass(that.classes.tableFixedStart,start>0).toggleClass(that.classes.tableFixedEnd,end>0).toggleClass(that.classes.tableFixedLeft,left>0).toggleClass(that.classes.tableFixedRight,right>0);var headerEl=dt.table().header(),footerEl=dt.table().footer(),headerHeight=$$1(headerEl).outerHeight(),footerHeight=$$1(footerEl).outerHeight();this.dom.topBlocker.appendTo(wrapper).css("top",0).css(this.s.rtl?"left":"right",0).css("height",headerHeight).css("width",barWidth+1).css("display",barWidth?"block":"none"),footerEl&&this.dom.bottomBlocker.appendTo(wrapper).css("bottom",0).css(this.s.rtl?"left":"right",0).css("height",footerHeight).css("width",barWidth+1).css("display",barWidth?"block":"none")},FixedColumns.prototype._destroy=function(){this.s.dt.off(".dtfc"),this.dom.scroller.off(".dtfc"),$$1(this.s.dt.table().node()).removeClass(this.classes.tableScrollingEnd+" "+this.classes.tableScrollingLeft+" "+this.classes.tableScrollingStart+" "+this.classes.tableScrollingRight),this.dom.bottomBlocker.remove(),this.dom.topBlocker.remove()},FixedColumns.prototype._fixColumn=function(idx,offset,side,header,footer,barWidth){var _this=this,dt=this.s.dt,applyStyles=function(jq,part){if("none"===side)jq.css("position","").css("left","").css("right","").removeClass(_this.classes.fixedEnd+" "+_this.classes.fixedLeft+" "+_this.classes.fixedRight+" "+_this.classes.fixedStart);else{var positionSide="start"===side?"left":"right";_this.s.rtl&&(positionSide="start"===side?"right":"left");var off=offset;"end"!==side||"header"!==part&&"footer"!==part||(off+=barWidth),jq.css("position","sticky").css(positionSide,off).addClass("start"===side?_this.classes.fixedStart:_this.classes.fixedEnd).addClass("left"===positionSide?_this.classes.fixedLeft:_this.classes.fixedRight)}};header.forEach((function(row){row[idx]&&applyStyles($$1(row[idx].cell),"header")})),applyStyles(dt.column(idx+":visible",{page:"current"}).nodes().to$(),"body"),footer&&footer.forEach((function(row){row[idx]&&applyStyles($$1(row[idx].cell),"footer")}))},FixedColumns.prototype._scroll=function(){var scroller=this.dom.scroller[0];if(scroller){var table=$$1(this.s.dt.table().node()).add(this.s.dt.table().header().parentNode).add(this.s.dt.table().footer().parentNode).add("div.dt-scroll-headInner table",this.s.dt.table().container()).add("div.dt-scroll-footInner table",this.s.dt.table().container()),scrollLeft=scroller.scrollLeft,ltr=!this.s.rtl,scrollStart=0!==scrollLeft,scrollEnd=scroller.scrollWidth>scroller.clientWidth+Math.abs(scrollLeft)+1;table.toggleClass(this.classes.tableScrollingStart,scrollStart),table.toggleClass(this.classes.tableScrollingEnd,scrollEnd),table.toggleClass(this.classes.tableScrollingLeft,scrollStart&&ltr||scrollEnd&&!ltr),table.toggleClass(this.classes.tableScrollingRight,scrollEnd&&ltr||scrollStart&&!ltr)}},FixedColumns.prototype._setKeyTableListener=function(){var _this=this;this.s.dt.on("key-focus.dt.dtfc",(function(e,dt,cell){var currScroll,cellPos=$$1(cell.node()).offset(),scroller=_this.dom.scroller[0],scroll=$$1($$1(_this.s.dt.table().node()).closest("div.dt-scroll-body"));if(_this.c.start>0){var rightMost=$$1(_this.s.dt.column(_this.c.start-1).header()),rightMostPos=rightMost.offset(),rightMostWidth=rightMost.outerWidth();$$1(cell.node()).hasClass(_this.classes.fixedLeft)?scroll.scrollLeft(0):cellPos.left<rightMostPos.left+rightMostWidth&&(currScroll=scroll.scrollLeft(),scroll.scrollLeft(currScroll-(rightMostPos.left+rightMostWidth-cellPos.left)))}if(_this.c.end>0){var numCols=_this.s.dt.columns().data().toArray().length,cellWidth=$$1(cell.node()).outerWidth(),leftMostPos=$$1(_this.s.dt.column(numCols-_this.c.end).header()).offset();$$1(cell.node()).hasClass(_this.classes.fixedRight)?scroll.scrollLeft(scroller.scrollWidth-scroller.clientWidth):cellPos.left+cellWidth>leftMostPos.left&&(currScroll=scroll.scrollLeft(),scroll.scrollLeft(currScroll-(leftMostPos.left-(cellPos.left+cellWidth))))}}))},FixedColumns.prototype._sum=function(widths,index,reverse){return void 0===reverse&&(reverse=!1),reverse&&(widths=widths.slice().reverse()),widths.slice(0,index).reduce((function(accum,val){return accum+val}),0)},FixedColumns.version="5.0.1",FixedColumns.classes={bottomBlocker:"dtfc-bottom-blocker",fixedEnd:"dtfc-fixed-end",fixedLeft:"dtfc-fixed-left",fixedRight:"dtfc-fixed-right",fixedStart:"dtfc-fixed-start",tableFixedEnd:"dtfc-has-end",tableFixedLeft:"dtfc-has-left",tableFixedRight:"dtfc-has-right",tableFixedStart:"dtfc-has-start",tableScrollingEnd:"dtfc-scrolling-end",tableScrollingLeft:"dtfc-scrolling-left",tableScrollingRight:"dtfc-scrolling-right",tableScrollingStart:"dtfc-scrolling-start",topBlocker:"dtfc-top-blocker"},FixedColumns.defaults={i18n:{button:"FixedColumns"},start:1,end:0},FixedColumns}();DataTable$1=($$1=$).fn.dataTable,$.fn.dataTable.FixedColumns=FixedColumns,$.fn.DataTable.FixedColumns=FixedColumns;var apiRegister=DataTable.Api.register;function _init(settings,options){void 0===options&&(options=null);var api=new DataTable.Api(settings),opts=options||(api.init().fixedColumns||DataTable.defaults.fixedColumns);return new FixedColumns(api,opts)}apiRegister("fixedColumns()",(function(){return this})),apiRegister("fixedColumns().start()",(function(newVal){var ctx=this.context[0];return void 0!==newVal?(ctx._fixedColumns.start(newVal),this):ctx._fixedColumns.start()})),apiRegister("fixedColumns().end()",(function(newVal){var ctx=this.context[0];return void 0!==newVal?(ctx._fixedColumns.end(newVal),this):ctx._fixedColumns.end()})),apiRegister("fixedColumns().left()",(function(newVal){var ctx=this.context[0];return void 0!==newVal?(ctx._fixedColumns.left(newVal),this):ctx._fixedColumns.left()})),apiRegister("fixedColumns().right()",(function(newVal){var ctx=this.context[0];return void 0!==newVal?(ctx._fixedColumns.right(newVal),this):ctx._fixedColumns.right()})),DataTable.ext.buttons.fixedColumns={action:function(e,dt,node,config){$(node).attr("active")?($(node).removeAttr("active").removeClass("active"),dt.fixedColumns().start(0),dt.fixedColumns().end(0)):($(node).attr("active","true").addClass("active"),dt.fixedColumns().start(config.config.start),dt.fixedColumns().end(config.config.end))},config:{start:1,end:0},init:function(dt,node,config){void 0===dt.settings()[0]._fixedColumns&&_init(dt.settings(),config),$(node).attr("active","true").addClass("active"),dt.button(node).text(config.text||dt.i18n("buttons.fixedColumns",dt.settings()[0]._fixedColumns.c.i18n.button))},text:null},$(document).on("plugin-init.dt",(function(e,settings){"dt"===e.namespace&&(settings.oInit.fixedColumns||DataTable.defaults.fixedColumns)&&(settings._fixedColumns||_init(settings,null))}))}(),DataTable}));

//# sourceMappingURL=dataTables.fixedColumns.min.js.map