{"version":3,"file":"buttons.colVis.min.js","sources":["../../src/libraries/buttons.colVis.js"],"sourcesContent":["/* eslint-disable */\n/*!\n * Column visibility buttons for Buttons and DataTables.\n * Â© SpryMedia Ltd - datatables.net/license\n */\n\n(function( factory ){\n\tif ( typeof define === 'function' && define.amd ) {\n\t\t// AMD\n\t\tdefine( ['jquery', 'mod_interactivevideo/libraries/datatables', 'mod_interactivevideo/libraries/dataTables.buttons'], function ( $ ) {\n\t\t\treturn factory( $, window, document );\n\t\t} );\n\t}\n\telse if ( typeof exports === 'object' ) {\n\t\t// CommonJS\n\t\tvar jq = require('jquery');\n\t\tvar cjsRequires = function (root, $) {\n\t\t\tif ( ! $.fn.dataTable ) {\n\t\t\t\trequire('mod_interactivevideo/libraries/datatables')(root, $);\n\t\t\t}\n\n\t\t\tif ( ! $.fn.dataTable.Buttons ) {\n\t\t\t\trequire('mod_interactivevideo/libraries/dataTables.buttons')(root, $);\n\t\t\t}\n\t\t};\n\n\t\tif (typeof window === 'undefined') {\n\t\t\tmodule.exports = function (root, $) {\n\t\t\t\tif ( ! root ) {\n\t\t\t\t\t// CommonJS environments without a window global must pass a\n\t\t\t\t\t// root. This will give an error otherwise\n\t\t\t\t\troot = window;\n\t\t\t\t}\n\n\t\t\t\tif ( ! $ ) {\n\t\t\t\t\t$ = jq( root );\n\t\t\t\t}\n\n\t\t\t\tcjsRequires( root, $ );\n\t\t\t\treturn factory( $, root, root.document );\n\t\t\t};\n\t\t}\n\t\telse {\n\t\t\tcjsRequires( window, jq );\n\t\t\tmodule.exports = factory( jq, window, window.document );\n\t\t}\n\t}\n\telse {\n\t\t// Browser\n\t\tfactory( jQuery, window, document );\n\t}\n}(function( $, window, document ) {\n'use strict';\nvar DataTable = $.fn.dataTable;\n\n\n\n$.extend(DataTable.ext.buttons, {\n\t// A collection of column visibility buttons\n\tcolvis: function (dt, conf) {\n\t\tvar node = null;\n\t\tvar buttonConf = {\n\t\t\textend: 'collection',\n\t\t\tinit: function (dt, n) {\n\t\t\t\tnode = n;\n\t\t\t},\n\t\t\ttext: function (dt) {\n\t\t\t\treturn dt.i18n('buttons.colvis', 'Column visibility');\n\t\t\t},\n\t\t\tclassName: 'buttons-colvis',\n\t\t\tcloseButton: false,\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\textend: 'columnsToggle',\n\t\t\t\t\tcolumns: conf.columns,\n\t\t\t\t\tcolumnText: conf.columnText\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\t// Rebuild the collection with the new column structure if columns are reordered\n\t\tdt.on('column-reorder.dt' + conf.namespace, function () {\n\t\t\tdt.button(null, dt.button(null, node).node()).collectionRebuild([\n\t\t\t\t{\n\t\t\t\t\textend: 'columnsToggle',\n\t\t\t\t\tcolumns: conf.columns,\n\t\t\t\t\tcolumnText: conf.columnText\n\t\t\t\t}\n\t\t\t]);\n\t\t});\n\n\t\treturn buttonConf;\n\t},\n\n\t// Selected columns with individual buttons - toggle column visibility\n\tcolumnsToggle: function (dt, conf) {\n\t\tvar columns = dt\n\t\t\t.columns(conf.columns)\n\t\t\t.indexes()\n\t\t\t.map(function (idx) {\n\t\t\t\treturn {\n\t\t\t\t\textend: 'columnToggle',\n\t\t\t\t\tcolumns: idx,\n\t\t\t\t\tcolumnText: conf.columnText\n\t\t\t\t};\n\t\t\t})\n\t\t\t.toArray();\n\n\t\treturn columns;\n\t},\n\n\t// Single button to toggle column visibility\n\tcolumnToggle: function (dt, conf) {\n\t\treturn {\n\t\t\textend: 'columnVisibility',\n\t\t\tcolumns: conf.columns,\n\t\t\tcolumnText: conf.columnText\n\t\t};\n\t},\n\n\t// Selected columns with individual buttons - set column visibility\n\tcolumnsVisibility: function (dt, conf) {\n\t\tvar columns = dt\n\t\t\t.columns(conf.columns)\n\t\t\t.indexes()\n\t\t\t.map(function (idx) {\n\t\t\t\treturn {\n\t\t\t\t\textend: 'columnVisibility',\n\t\t\t\t\tcolumns: idx,\n\t\t\t\t\tvisibility: conf.visibility,\n\t\t\t\t\tcolumnText: conf.columnText\n\t\t\t\t};\n\t\t\t})\n\t\t\t.toArray();\n\n\t\treturn columns;\n\t},\n\n\t// Single button to set column visibility\n\tcolumnVisibility: {\n\t\tcolumns: undefined, // column selector\n\t\ttext: function (dt, button, conf) {\n\t\t\treturn conf._columnText(dt, conf);\n\t\t},\n\t\tclassName: 'buttons-columnVisibility',\n\t\taction: function (e, dt, button, conf) {\n\t\t\tvar col = dt.columns(conf.columns);\n\t\t\tvar curr = col.visible();\n\n\t\t\tcol.visible(\n\t\t\t\tconf.visibility !== undefined ? conf.visibility : !(curr.length ? curr[0] : false)\n\t\t\t);\n\t\t},\n\t\tinit: function (dt, button, conf) {\n\t\t\tvar that = this;\n\t\t\tbutton.attr('data-cv-idx', conf.columns);\n\n\t\t\tdt.on('column-visibility.dt' + conf.namespace, function (e, settings) {\n\t\t\t\tif (!settings.bDestroying && settings.nTable == dt.settings()[0].nTable) {\n\t\t\t\t\tthat.active(dt.column(conf.columns).visible());\n\t\t\t\t}\n\t\t\t}).on('column-reorder.dt' + conf.namespace, function () {\n\t\t\t\t// Button has been removed from the DOM\n\t\t\t\tif (conf.destroying) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (dt.columns(conf.columns).count() !== 1) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// This button controls the same column index but the text for the column has\n\t\t\t\t// changed\n\t\t\t\tthat.text(conf._columnText(dt, conf));\n\n\t\t\t\t// Since its a different column, we need to check its visibility\n\t\t\t\tthat.active(dt.column(conf.columns).visible());\n\t\t\t});\n\n\t\t\tthis.active(dt.column(conf.columns).visible());\n\t\t},\n\t\tdestroy: function (dt, button, conf) {\n\t\t\tdt.off('column-visibility.dt' + conf.namespace).off(\n\t\t\t\t'column-reorder.dt' + conf.namespace\n\t\t\t);\n\t\t},\n\n\t\t_columnText: function (dt, conf) {\n\t\t\tif (typeof conf.text === 'string') {\n\t\t\t\treturn conf.text;\n\t\t\t}\n\n\t\t\tvar title = dt.column(conf.columns).title();\n\t\t\tvar idx = dt.column(conf.columns).index();\n\n\t\t\ttitle = title\n\t\t\t\t.replace(/\\n/g, ' ') // remove new lines\n\t\t\t\t.replace(/<br\\s*\\/?>/gi, ' ') // replace line breaks with spaces\n\t\t\t\t.replace(/<select(.*?)<\\/select\\s*>/gi, ''); // remove select tags, including options text\n\n\t\t\t// Strip HTML comments\n\t\t\ttitle = DataTable.Buttons.stripHtmlComments(title);\n\n\t\t\t// Use whatever HTML stripper DataTables is configured for\n\t\t\ttitle = DataTable.util.stripHtml(title).trim();\n\n\t\t\treturn conf.columnText ? conf.columnText(dt, idx, title) : title;\n\t\t}\n\t},\n\n\tcolvisRestore: {\n\t\tclassName: 'buttons-colvisRestore',\n\n\t\ttext: function (dt) {\n\t\t\treturn dt.i18n('buttons.colvisRestore', 'Restore visibility');\n\t\t},\n\n\t\tinit: function (dt, button, conf) {\n\t\t\t// Use a private parameter on the column. This gets moved around with the\n\t\t\t// column if ColReorder changes the order\n\t\t\tdt.columns().every(function () {\n\t\t\t\tvar init = this.init();\n\n\t\t\t\tif (init.__visOriginal === undefined) {\n\t\t\t\t\tinit.__visOriginal = this.visible();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\taction: function (e, dt, button, conf) {\n\t\t\tdt.columns().every(function (i) {\n\t\t\t\tvar init = this.init();\n\n\t\t\t\tthis.visible(init.__visOriginal);\n\t\t\t});\n\t\t}\n\t},\n\n\tcolvisGroup: {\n\t\tclassName: 'buttons-colvisGroup',\n\n\t\taction: function (e, dt, button, conf) {\n\t\t\tdt.columns(conf.show).visible(true, false);\n\t\t\tdt.columns(conf.hide).visible(false, false);\n\n\t\t\tdt.columns.adjust();\n\t\t},\n\n\t\tshow: [],\n\n\t\thide: []\n\t}\n});\n\n\nreturn DataTable;\n}));\n"],"names":["factory","define","amd","$","window","document","exports","jq","require","cjsRequires","root","fn","dataTable","Buttons","module","jQuery","DataTable","extend","ext","buttons","colvis","dt","conf","node","buttonConf","init","n","text","i18n","className","closeButton","columns","columnText","on","namespace","button","collectionRebuild","columnsToggle","indexes","map","idx","toArray","columnToggle","columnsVisibility","visibility","columnVisibility","undefined","_columnText","action","e","col","curr","visible","length","that","this","attr","settings","bDestroying","nTable","active","column","destroying","count","destroy","off","title","index","replace","stripHtmlComments","util","stripHtml","trim","colvisRestore","every","__visOriginal","i","colvisGroup","show","hide","adjust"],"mappings":"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"}