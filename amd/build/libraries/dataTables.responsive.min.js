!function(factory){if("function"==typeof define&&define.amd)define("mod_interactivevideo/libraries/dataTables.responsive",["jquery","mod_interactivevideo/libraries/datatables"],(function($){return factory($,window,document)}));else if("object"==typeof exports){var jq=require("jquery"),cjsRequires=function(root,$){$.fn.dataTable||require("mod_interactivevideo/libraries/datatables")(root,$)};"undefined"==typeof window?module.exports=function(root,$){return root||(root=window),$||($=jq(root)),cjsRequires(root,$),factory($,root,root.document)}:(cjsRequires(window,jq),module.exports=factory(jq,window,window.document))}else factory(jQuery,window,document)}((function($,window,document){var DataTable=$.fn.dataTable,Responsive=function(settings,opts){if(!DataTable.versionCheck||!DataTable.versionCheck("2"))throw"DataTables Responsive requires DataTables 2 or newer";this.s={childNodeStore:{},columns:[],current:[],dt:new DataTable.Api(settings)},this.s.dt.settings()[0].responsive||(opts&&"string"==typeof opts.details?opts.details={type:opts.details}:opts&&!1===opts.details?opts.details={type:!1}:opts&&!0===opts.details&&(opts.details={type:"inline"}),this.c=$.extend(!0,{},Responsive.defaults,DataTable.defaults.responsive,opts),settings.responsive=this,this._constructor())};$.extend(Responsive.prototype,{_constructor:function(){var that=this,dt=this.s.dt,oldWindowWidth=$(window).innerWidth();dt.settings()[0]._responsive=this,$(window).on("orientationchange.dtr",DataTable.util.throttle((function(){var width=$(window).innerWidth();width!==oldWindowWidth&&(that._resize(),oldWindowWidth=width)}))),dt.on("row-created.dtr",(function(e,tr,data,idx){-1!==$.inArray(!1,that.s.current)&&$(">td, >th",tr).each((function(i){var idx=dt.column.index("toData",i);!1===that.s.current[idx]&&$(this).css("display","none").addClass("dtr-hidden")}))})),dt.on("destroy.dtr",(function(){dt.off(".dtr"),$(dt.table().body()).off(".dtr"),$(window).off("resize.dtr orientationchange.dtr"),dt.cells(".dtr-control").nodes().to$().removeClass("dtr-control"),$(dt.table().node()).removeClass("dtr-inline collapsed"),$.each(that.s.current,(function(i,val){!1===val&&that._setColumnVis(i,!0)}))})),this.c.breakpoints.sort((function(a,b){return a.width<b.width?1:a.width>b.width?-1:0})),this._classLogic();var details=this.c.details;!1!==details.type&&(that._detailsInit(),dt.on("column-visibility.dtr",(function(){that._timer&&clearTimeout(that._timer),that._timer=setTimeout((function(){that._timer=null,that._classLogic(),that._resizeAuto(),that._resize(!0),that._redrawChildren()}),100)})),dt.on("draw.dtr",(function(){that._redrawChildren()})),$(dt.table().node()).addClass("dtr-"+details.type)),dt.on("column-calc.dt",(function(e,d){for(var curr=that.s.current,i=0;i<curr.length;i++){var idx=d.visible.indexOf(i);!1===curr[i]&&idx>=0&&d.visible.splice(idx,1)}})),dt.on("preXhr.dtr",(function(){var rowIds=[];dt.rows().every((function(){this.child.isShown()&&rowIds.push(this.id(!0))})),dt.one("draw.dtr",(function(){that._resizeAuto(),that._resize(),dt.rows(rowIds).every((function(){that._detailsDisplay(this,!1)}))}))})),dt.on("draw.dtr",(function(){that._controlClass()})).ready((function(){that._resizeAuto(),that._resize(),dt.on("column-reorder.dtr",(function(e,settings,details){that._classLogic(),that._resizeAuto(),that._resize(!0)})),dt.on("column-sizing.dtr",(function(){that._resizeAuto(),that._resize()}))}))},_colGroupAttach:function(colGroup,colEls,idx){var found=null;if(colEls[idx].get(0).parentNode!==colGroup[0]){for(var i=idx+1;i<colEls.length;i++)if(colGroup[0]===colEls[i].get(0).parentNode){found=i;break}null!==found?colEls[idx].insertBefore(colEls[found][0]):colGroup.append(colEls[idx])}},_childNodes:function(dt,row,col){var name=row+"-"+col;if(this.s.childNodeStore[name])return this.s.childNodeStore[name];for(var nodes=[],children=dt.cell(row,col).node().childNodes,i=0,ien=children.length;i<ien;i++)nodes.push(children[i]);return this.s.childNodeStore[name]=nodes,nodes},_childNodesRestore:function(dt,row,col){var name=row+"-"+col;if(this.s.childNodeStore[name]){var node=dt.cell(row,col).node(),store=this.s.childNodeStore[name];if(store.length>0){for(var parentChildren=store[0].parentNode.childNodes,a=[],i=0,ien=parentChildren.length;i<ien;i++)a.push(parentChildren[i]);for(var j=0,jen=a.length;j<jen;j++)node.appendChild(a[j])}this.s.childNodeStore[name]=void 0}},_columnsVisiblity:function(breakpoint){var i,ien,dt=this.s.dt,columns=this.s.columns,order=columns.map((function(col,idx){return{columnIdx:idx,priority:col.priority}})).sort((function(a,b){return a.priority!==b.priority?a.priority-b.priority:a.columnIdx-b.columnIdx})),display=$.map(columns,(function(col,i){return!1===dt.column(i).visible()?"not-visible":(!col.auto||null!==col.minWidth)&&(!0===col.auto?"-":-1!==$.inArray(breakpoint,col.includeIn))})),requiredWidth=0;for(i=0,ien=display.length;i<ien;i++)!0===display[i]&&(requiredWidth+=columns[i].minWidth);var scrolling=dt.settings()[0].oScroll,bar=scrolling.sY||scrolling.sX?scrolling.iBarWidth:0,usedWidth=dt.table().container().offsetWidth-bar-requiredWidth;for(i=0,ien=display.length;i<ien;i++)columns[i].control&&(usedWidth-=columns[i].minWidth);var empty=!1;for(i=0,ien=order.length;i<ien;i++){var colIdx=order[i].columnIdx;"-"===display[colIdx]&&!columns[colIdx].control&&columns[colIdx].minWidth&&(empty||usedWidth-columns[colIdx].minWidth<0?(empty=!0,display[colIdx]=!1):display[colIdx]=!0,usedWidth-=columns[colIdx].minWidth)}var showControl=!1;for(i=0,ien=columns.length;i<ien;i++)if(!columns[i].control&&!columns[i].never&&!1===display[i]){showControl=!0;break}for(i=0,ien=columns.length;i<ien;i++)columns[i].control&&(display[i]=showControl),"not-visible"===display[i]&&(display[i]=!1);return-1===$.inArray(!0,display)&&(display[0]=!0),display},_classLogic:function(){var that=this,breakpoints=this.c.breakpoints,columns=this.s.dt.columns().eq(0).map((function(i){var column=this.column(i),className=column.header().className,priority=column.init().responsivePriority,dataPriority=column.header().getAttribute("data-priority");return void 0===priority&&(priority=null==dataPriority?1e4:1*dataPriority),{className:className,includeIn:[],auto:!1,control:!1,never:!!className.match(/\b(dtr\-)?never\b/),priority:priority}})),add=function(colIdx,name){var includeIn=columns[colIdx].includeIn;-1===$.inArray(name,includeIn)&&includeIn.push(name)},column=function(colIdx,name,operator,matched){var size,i,ien;if(operator){if("max-"===operator)for(size=that._find(name).width,i=0,ien=breakpoints.length;i<ien;i++)breakpoints[i].width<=size&&add(colIdx,breakpoints[i].name);else if("min-"===operator)for(size=that._find(name).width,i=0,ien=breakpoints.length;i<ien;i++)breakpoints[i].width>=size&&add(colIdx,breakpoints[i].name);else if("not-"===operator)for(i=0,ien=breakpoints.length;i<ien;i++)-1===breakpoints[i].name.indexOf(matched)&&add(colIdx,breakpoints[i].name)}else columns[colIdx].includeIn.push(name)};columns.each((function(col,i){for(var classNames=col.className.split(" "),hasClass=!1,k=0,ken=classNames.length;k<ken;k++){var className=classNames[k].trim();if("all"===className||"dtr-all"===className)return hasClass=!0,void(col.includeIn=$.map(breakpoints,(function(a){return a.name})));if("none"===className||"dtr-none"===className||col.never)return void(hasClass=!0);if("control"===className||"dtr-control"===className)return hasClass=!0,void(col.control=!0);$.each(breakpoints,(function(j,breakpoint){var brokenPoint=breakpoint.name.split("-"),re=new RegExp("(min\\-|max\\-|not\\-)?("+brokenPoint[0]+")(\\-[_a-zA-Z0-9])?"),match=className.match(re);match&&(hasClass=!0,match[2]===brokenPoint[0]&&match[3]==="-"+brokenPoint[1]?column(i,breakpoint.name,match[1],match[2]+match[3]):match[2]!==brokenPoint[0]||match[3]||column(i,breakpoint.name,match[1],match[2]))}))}hasClass||(col.auto=!0)})),this.s.columns=columns},_controlClass:function(){if("inline"===this.c.details.type){var dt=this.s.dt,columnsVis=this.s.current,firstVisible=$.inArray(!0,columnsVis);dt.cells(null,(function(idx){return idx!==firstVisible}),{page:"current"}).nodes().to$().filter(".dtr-control").removeClass("dtr-control"),dt.cells(null,firstVisible,{page:"current"}).nodes().to$().addClass("dtr-control")}},_detailsDisplay:function(row,update){var that=this,dt=this.s.dt,details=this.c.details,event=function(res){$(row.node()).toggleClass("dtr-expanded",!1!==res),$(dt.table().node()).triggerHandler("responsive-display.dt",[dt,row,res,update])};if(details&&!1!==details.type){var renderer="string"==typeof details.renderer?Responsive.renderer[details.renderer]():details.renderer,res=details.display(row,update,(function(){return renderer.call(that,dt,row[0][0],that._detailsObj(row[0]))}),(function(){event(!1)}));"boolean"==typeof res&&event(res)}},_detailsInit:function(){var that=this,dt=this.s.dt,details=this.c.details;"inline"===details.type&&(details.target="td.dtr-control, th.dtr-control"),dt.on("draw.dtr",(function(){that._tabIndexes()})),that._tabIndexes(),$(dt.table().body()).on("keyup.dtr","td, th",(function(e){13===e.keyCode&&$(this).data("dtr-keyboard")&&$(this).click()}));var target=details.target,selector="string"==typeof target?target:"td, th";void 0===target&&null===target||$(dt.table().body()).on("click.dtr mousedown.dtr mouseup.dtr",selector,(function(e){if($(dt.table().node()).hasClass("collapsed")&&-1!==$.inArray($(this).closest("tr").get(0),dt.rows().nodes().toArray())){if("number"==typeof target){var targetIdx=target<0?dt.columns().eq(0).length+target:target;if(dt.cell(this).index().column!==targetIdx)return}var row=dt.row($(this).closest("tr"));"click"===e.type?that._detailsDisplay(row,!1):"mousedown"===e.type?$(this).css("outline","none"):"mouseup"===e.type&&$(this).trigger("blur").css("outline","")}}))},_detailsObj:function(rowIdx){var that=this,dt=this.s.dt;return $.map(this.s.columns,(function(col,i){if(!col.never&&!col.control)return{className:dt.settings()[0].aoColumns[i].sClass,columnIndex:i,data:dt.cell(rowIdx,i).render(that.c.orthogonal),hidden:dt.column(i).visible()&&!that.s.current[i],rowIndex:rowIdx,title:dt.column(i).title()}}))},_find:function(name){for(var breakpoints=this.c.breakpoints,i=0,ien=breakpoints.length;i<ien;i++)if(breakpoints[i].name===name)return breakpoints[i]},_redrawChildren:function(){var that=this,dt=this.s.dt;dt.rows({page:"current"}).iterator("row",(function(settings,idx){that._detailsDisplay(dt.row(idx),!0)}))},_resize:function(forceRedraw){var i,ien,that=this,dt=this.s.dt,width=$(window).innerWidth(),breakpoints=this.c.breakpoints,breakpoint=breakpoints[0].name,columns=this.s.columns,oldVis=this.s.current.slice();for(i=breakpoints.length-1;i>=0;i--)if(width<=breakpoints[i].width){breakpoint=breakpoints[i].name;break}var columnsVis=this._columnsVisiblity(breakpoint);this.s.current=columnsVis;var collapsedClass=!1;for(i=0,ien=columns.length;i<ien;i++)if(!1===columnsVis[i]&&!columns[i].never&&!columns[i].control&&!1==!dt.column(i).visible()){collapsedClass=!0;break}$(dt.table().node()).toggleClass("collapsed",collapsedClass);var changed=!1,visible=0,dtSettings=dt.settings()[0],colGroup=$(dt.table().node()).children("colgroup"),colEls=dtSettings.aoColumns.map((function(col){return col.colEl}));dt.columns().eq(0).each((function(colIdx,i){dt.column(colIdx).visible()&&(!0===columnsVis[i]&&visible++,(forceRedraw||columnsVis[i]!==oldVis[i])&&(changed=!0,that._setColumnVis(colIdx,columnsVis[i])),columnsVis[i]?that._colGroupAttach(colGroup,colEls,i):colEls[i].detach())})),changed&&(dt.columns.adjust(),this._redrawChildren(),$(dt.table().node()).trigger("responsive-resize.dt",[dt,this._responsiveOnlyHidden()]),0===dt.page.info().recordsDisplay&&$("td",dt.table().body()).eq(0).attr("colspan",visible)),that._controlClass()},_resizeAuto:function(){var dt=this.s.dt,columns=this.s.columns,that=this,visibleColumns=dt.columns().indexes().filter((function(idx){return dt.column(idx).visible()}));if(this.c.auto&&-1!==$.inArray(!0,$.map(columns,(function(c){return c.auto})))){var clonedTable=dt.table().node().cloneNode(!1),clonedHeader=$(dt.table().header().cloneNode(!1)).appendTo(clonedTable),clonedFooter=$(dt.table().footer().cloneNode(!1)).appendTo(clonedTable),clonedBody=$(dt.table().body()).clone(!1,!1).empty().appendTo(clonedTable);clonedTable.style.width="auto",dt.table().header.structure(visibleColumns).forEach((row=>{var cells=row.filter((function(el){return!!el})).map((function(el){return $(el.cell).clone(!1).css("display","table-cell").css("width","auto").css("min-width",0)}));$("<tr/>").append(cells).appendTo(clonedHeader)}));for(var emptyRow=$("<tr/>").appendTo(clonedBody),i=0;i<visibleColumns.count();i++)emptyRow.append("<td/>");this.c.details.renderer._responsiveMovesNodes?dt.rows({page:"current"}).every((function(rowIdx){var node=this.node();if(node){var tr=node.cloneNode(!1);dt.cells(rowIdx,visibleColumns).every((function(rowIdx2,colIdx){var store=that.s.childNodeStore[rowIdx+"-"+colIdx];store?$(this.node().cloneNode(!1)).append($(store).clone()).appendTo(tr):$(this.node()).clone(!1).appendTo(tr)})),clonedBody.append(tr)}})):$(clonedBody).append($(dt.rows({page:"current"}).nodes()).clone(!1)).find("th, td").css("display",""),clonedBody.find("th, td").css("display",""),dt.table().footer.structure(visibleColumns).forEach((row=>{var cells=row.filter((function(el){return!!el})).map((function(el){return $(el.cell).clone(!1).css("display","table-cell").css("width","auto").css("min-width",0)}));$("<tr/>").append(cells).appendTo(clonedFooter)})),"inline"===this.c.details.type&&$(clonedTable).addClass("dtr-inline collapsed"),$(clonedTable).find("[name]").removeAttr("name"),$(clonedTable).css("position","relative");var inserted=$("<div/>").css({width:1,height:1,overflow:"hidden",clear:"both"}).append(clonedTable);inserted.insertBefore(dt.table().node()),emptyRow.children().each((function(i){var idx=dt.column.index("fromVisible",i);columns[idx].minWidth=this.offsetWidth||0})),inserted.remove()}},_responsiveOnlyHidden:function(){var dt=this.s.dt;return $.map(this.s.current,(function(v,i){return!1===dt.column(i).visible()||v}))},_setColumnVis:function(col,showHide){var that=this,dt=this.s.dt,display=showHide?"":"none";this._setHeaderVis(col,showHide,dt.table().header.structure()),this._setHeaderVis(col,showHide,dt.table().footer.structure()),dt.column(col).nodes().to$().css("display",display).toggleClass("dtr-hidden",!showHide),$.isEmptyObject(this.s.childNodeStore)||dt.cells(null,col).indexes().each((function(idx){that._childNodesRestore(dt,idx.row,idx.column)}))},_setHeaderVis:function(col,showHide,structure){var that=this,display=showHide?"":"none";structure.forEach((function(row){if(row[col])$(row[col].cell).css("display",display).toggleClass("dtr-hidden",!showHide);else for(var search=col;search>=0;){if(row[search]){row[search].cell.colSpan=that._colspan(row,search);break}search--}}))},_colspan:function(row,idx){for(var colspan=1,col=idx+1;col<row.length;col++)if(null===row[col]&&this.s.current[col])colspan++;else if(row[col])break;return colspan},_tabIndexes:function(){var dt=this.s.dt,cells=dt.cells({page:"current"}).nodes().to$(),ctx=dt.settings()[0],target=this.c.details.target;cells.filter("[data-dtr-keyboard]").removeData("[data-dtr-keyboard]"),"number"==typeof target?dt.cells(null,target,{page:"current"}).nodes().to$().attr("tabIndex",ctx.iTabIndex).data("dtr-keyboard",1):("td:first-child, th:first-child"===target&&(target=">td:first-child, >th:first-child"),$(target,dt.rows({page:"current"}).nodes()).attr("tabIndex",ctx.iTabIndex).data("dtr-keyboard",1))}}),Responsive.breakpoints=[{name:"desktop",width:1/0},{name:"tablet-l",width:1024},{name:"tablet-p",width:768},{name:"mobile-l",width:480},{name:"mobile-p",width:320}],Responsive.display={childRow:function(row,update,render){var rowNode=$(row.node());if(!update){if(rowNode.hasClass("dtr-expanded"))return row.child(!1),!1;var rendered=render();return!1!==rendered&&(row.child(rendered,"child").show(),!0)}if(rowNode.hasClass("dtr-expanded"))return row.child(render(),"child").show(),!0},childRowImmediate:function(row,update,render){var rowNode=$(row.node());if(!update&&rowNode.hasClass("dtr-expanded")||!row.responsive.hasHidden())return row.child(!1),!1;var rendered=render();return!1!==rendered&&(row.child(rendered,"child").show(),!0)},modal:function(options){return function(row,update,render,closeCallback){var modal,rendered=render();if(!1===rendered)return!1;if(update){if(!(modal=$("div.dtr-modal-content")).length||row.index()!==modal.data("dtr-row-idx"))return null;modal.empty().append(rendered)}else{var close=function(){modal.remove(),$(document).off("keypress.dtr"),$(row.node()).removeClass("dtr-expanded"),closeCallback()};modal=$('<div class="dtr-modal"/>').append($('<div class="dtr-modal-display"/>').append($('<div class="dtr-modal-content"/>').data("dtr-row-idx",row.index()).append(rendered)).append($('<div class="dtr-modal-close">&times;</div>').click((function(){close()})))).append($('<div class="dtr-modal-background"/>').click((function(){close()}))).appendTo("body"),$(row.node()).addClass("dtr-expanded"),$(document).on("keyup.dtr",(function(e){27===e.keyCode&&(e.stopPropagation(),close())}))}return options&&options.header&&$("div.dtr-modal-content").prepend("<h2>"+options.header(row)+"</h2>"),!0}}},Responsive.renderer={listHiddenNodes:function(){var fn=function(api,rowIdx,columns){var that=this,ul=$('<ul data-dtr-index="'+rowIdx+'" class="dtr-details"/>'),found=!1;return $.each(columns,(function(i,col){if(col.hidden){var klass=col.className?'class="'+col.className+'"':"";$("<li "+klass+' data-dtr-index="'+col.columnIndex+'" data-dt-row="'+col.rowIndex+'" data-dt-column="'+col.columnIndex+'"><span class="dtr-title">'+col.title+"</span> </li>").append($('<span class="dtr-data"/>').append(that._childNodes(api,col.rowIndex,col.columnIndex))).appendTo(ul),found=!0}})),!!found&&ul};return fn._responsiveMovesNodes=!0,fn},listHidden:function(){return function(api,rowIdx,columns){var data=$.map(columns,(function(col){var klass=col.className?'class="'+col.className+'"':"";return col.hidden?"<li "+klass+' data-dtr-index="'+col.columnIndex+'" data-dt-row="'+col.rowIndex+'" data-dt-column="'+col.columnIndex+'"><span class="dtr-title">'+col.title+'</span> <span class="dtr-data">'+col.data+"</span></li>":""})).join("");return!!data&&$('<ul data-dtr-index="'+rowIdx+'" class="dtr-details"/>').append(data)}},tableAll:function(options){return options=$.extend({tableClass:""},options),function(api,rowIdx,columns){var data=$.map(columns,(function(col){return"<tr "+(col.className?'class="'+col.className+'"':"")+' data-dt-row="'+col.rowIndex+'" data-dt-column="'+col.columnIndex+'"><td>'+col.title+":</td> <td>"+col.data+"</td></tr>"})).join("");return $('<table class="'+options.tableClass+' dtr-details" width="100%"/>').append(data)}}},Responsive.defaults={breakpoints:Responsive.breakpoints,auto:!0,details:{display:Responsive.display.childRow,renderer:Responsive.renderer.listHidden(),target:0,type:"inline"},orthogonal:"display"};var Api=$.fn.dataTable.Api;return Api.register("responsive()",(function(){return this})),Api.register("responsive.index()",(function(li){return{column:(li=$(li)).data("dtr-index"),row:li.parent().data("dtr-index")}})),Api.register("responsive.rebuild()",(function(){return this.iterator("table",(function(ctx){ctx._responsive&&ctx._responsive._classLogic()}))})),Api.register("responsive.recalc()",(function(){return this.iterator("table",(function(ctx){ctx._responsive&&(ctx._responsive._resizeAuto(),ctx._responsive._resize())}))})),Api.register("responsive.hasHidden()",(function(){var ctx=this.context[0];return!!ctx._responsive&&-1!==$.inArray(!1,ctx._responsive._responsiveOnlyHidden())})),Api.registerPlural("columns().responsiveHidden()","column().responsiveHidden()",(function(){return this.iterator("column",(function(settings,column){return!!settings._responsive&&settings._responsive._responsiveOnlyHidden()[column]}),1)})),Responsive.version="3.0.3",$.fn.dataTable.Responsive=Responsive,$.fn.DataTable.Responsive=Responsive,$(document).on("preInit.dt.dtr",(function(e,settings,json){if("dt"===e.namespace&&($(settings.nTable).hasClass("responsive")||$(settings.nTable).hasClass("dt-responsive")||settings.oInit.responsive||DataTable.defaults.responsive)){var init=settings.oInit.responsive;!1!==init&&new Responsive(settings,$.isPlainObject(init)?init:{})}})),DataTable}));

//# sourceMappingURL=dataTables.responsive.min.js.map