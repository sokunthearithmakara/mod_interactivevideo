{"version":3,"file":"mod_form.min.js","sources":["../src/mod_form.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Interactive Video module form\n *\n * @module     mod_interactivevideo/mod_form\n * @copyright  2024 Sokunthearith Makara <sokunthearithmakara@gmail.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery', 'core/notification', 'core_form/modalform', 'core/str'], function($, notification, ModalForm, str) {\n    return {\n        /**\n         * Init function on page loads.\n         * @param {Number} id module id\n         * @param {Number} usercontextid user context id\n         */\n        'init': function(id, usercontextid) {\n            var totaltime, player;\n            var videowrapper = $('#video-wrapper');\n            var endinput = $('input[name=end]');\n            var startinput = $('input[name=start]');\n            var startassistinput = $('input[name=startassist]');\n            var endassistinput = $('input[name=endassist]');\n            var totaltimeinput = $('input[name=totaltime]');\n            var videourlinput = $('input[name=videourl]');\n            var sourceinput = $('input[name=source]');\n            var videoinput = $('input[name=video]');\n            var uploadfield = $(\"#fitem_id_upload\");\n            var deletefield = $(\"#fitem_id_delete\");\n            var videofile = $('input[name=videofile]');\n            var videotype = $('input[name=type]');\n\n            /**\n             * Format seconds to HH:MM:SS.\n             * @param {Number} s seconds\n             * @returns\n             */\n            const convertSecondsToHMS = (s) => {\n                var hours = Math.floor(s / 3600);\n                var minutes = Math.floor((s - (hours * 3600)) / 60);\n                var seconds = s - (hours * 3600) - (minutes * 60);\n                seconds = seconds.toFixed(2);\n                var result = (hours < 10 ? \"0\" + hours : hours);\n                result += \":\" + (minutes < 10 ? \"0\" + minutes : minutes);\n                result += \":\" + (seconds < 10 ? \"0\" + seconds : seconds);\n                return result;\n            };\n\n            /**\n             * Scripts to run when the player is ready.\n             */\n            const whenPlayerReady = async function() {\n                videowrapper.show();\n                // Recalculate the ratio of the video.\n                let ratio = player.aspectratio;\n                if (ratio < 1) {\n                    ratio = 1;\n                }\n                $(\"#video-wrapper\").css('padding-bottom', (1 / ratio) * 100 + '%');\n\n                const duration = await player.getDuration();\n                totaltime = Number(duration.toFixed(2));\n                totaltimeinput.val(totaltime);\n                if (Number(endinput.val()) > 0 && Number(endinput.val()) > totaltime) {\n                    endinput.val(totaltime);\n                    endassistinput.val(convertSecondsToHMS(totaltime));\n                }\n\n                if (Number(startinput.val()) > 0 && Number(startinput.val()) > totaltime) {\n                    startinput.val(0);\n                    startassistinput.val('00:00:00.00');\n                }\n\n                if (endassistinput.val() == '00:00:00.00' || endassistinput.val() == '') {\n                    endassistinput.val(convertSecondsToHMS(totaltime));\n                    endinput.val(totaltime);\n                }\n                $(\"#videototaltime\").text(\"<= \" + convertSecondsToHMS(totaltime));\n            };\n\n            $(document).on('iv:playerReady', function() {\n                whenPlayerReady();\n            });\n\n            $(document).on('iv:playerError', async function() {\n                let strings = await str.get_strings([\n                    {key: 'thereisanissueloadingvideo', component: 'mod_interactivevideo'},\n                ]);\n                videourlinput.addClass('is-invalid');\n                videourlinput.after('<div class=\"form-control-feedback invalid-feedback d-inline\">'\n                    + strings[0] + '</div>');\n            });\n\n            const checkVideo = (url) => new Promise((resolve) => {\n                // Remove video element if it exists.\n                if (document.querySelector('video')) {\n                    document.querySelector('video').remove();\n                }\n                var video = document.createElement('video');\n                video.src = url;\n                video.addEventListener('canplay', function() {\n                    resolve(true);\n                });\n\n                video.addEventListener('error', function() {\n                    resolve(false);\n                });\n            });\n\n            videourlinput.on('input', async function() {\n                videourlinput.removeClass('is-invalid');\n                videourlinput.next('.form-control-feedback').remove();\n                videotype.val('');\n                if (player) {\n                    player.destroy();\n                }\n                var url = $(this).val().trim();\n                if (url == '') {\n                    videowrapper.hide();\n                    return;\n                }\n\n                // YOUTUBE:: Check if the video is a youtube video.\n                let regex = /(?:https?:\\/\\/)?(?:www\\.)?(?:youtube.com|youtu.be)(?:\\/embed\\/|\\/watch\\?v=|\\/)([^/]+)/g;\n                var match = regex.exec(url);\n                if (match) {\n                    videowrapper.show();\n                    // Show loader while the video is loading.\n                    videowrapper.html('<div id=\"player\" class=\"w-100\"></div>');\n                    videotype.val('yt');\n                    require(['mod_interactivevideo/player/yt'], function(VP) {\n                        player = new VP(url, 0, null, true, false, true);\n                    });\n                    return;\n                }\n\n                // VIMEO:: Extract id from the URL.\n                regex = /(?:https?:\\/\\/)?(?:www\\.)?(?:vimeo\\.com)\\/(?:channels\\/[A-Za-z0-9]+\\/|)([^\\/]+)/g;\n                match = regex.exec(url);\n                var vid = match ? match[1] : null;\n                if (vid) {\n                    url = 'https://vimeo.com/' + vid;\n                    videourlinput.val(url);\n\n                    // Show loader while the video is loading\n                    videowrapper.html('<div id=\"player\" class=\"w-100\"></div>');\n                    videotype.val('vimeo');\n                    require(['mod_interactivevideo/player/vimeo'], function(VP) {\n                        player = new VP(url, 0, null, true);\n                    });\n                    return;\n                }\n\n                // DAILYMOTION:: Check if the video is from daily motion.\n                regex = /(?:https?:\\/\\/)?(?:www\\.)?(?:dai\\.ly|dailymotion\\.com)\\/(?:embed\\/video\\/|video\\/|)([^\\/]+)/g;\n                match = regex.exec(url);\n                if (match) {\n                    videowrapper.show();\n                    // Show loader while the video is loading\n                    videowrapper.html('<div id=\"player\" class=\"w-100\"></div>');\n                    videotype.val('dailymotion');\n                    require(['mod_interactivevideo/player/dailymotion'], function(VP) {\n                        player = new VP(url, 0, null, true);\n                    });\n                    return;\n                }\n\n                // WISTIA:: Check if the video is from wistia e.g. https://sokunthearithmakara.wistia.com/medias/kojs3bi9bf.\n                const regexWistia = /(?:https?:\\/\\/)?(?:www\\.)?(?:wistia\\.com)\\/medias\\/([^/]+)/g;\n                match = regexWistia.exec(url);\n                const mediaId = match ? match[1] : null;\n                if (mediaId) {\n                    videowrapper.show();\n                    videotype.val('wistia');\n                    require(['mod_interactivevideo/player/wistia'], function(VP) {\n                        player = new VP(url, 0, null, true);\n                    });\n                    return;\n                }\n\n                // VIDEO URL:: Check if the link is a direct video link and video is \"canplay\".\n                if (await checkVideo(url)) {\n                    // Show loader while the video is loading.\n                    videowrapper.html('<video id=\"player\" class=\"w-100\"></video>');\n                    videotype.val('html5video');\n                    require(['mod_interactivevideo/player/html5video'], function(VP) {\n                        player = new VP(url, 0, null, true);\n                    });\n                    return;\n                }\n\n                // Invalid video url.\n                const strings = await str.get_strings([\n                    {key: 'invalidvideourl', component: 'mod_interactivevideo'},\n                    {key: 'error', component: 'core'}\n                ]);\n                notification.alert(strings[1], strings[0]);\n                videowrapper.hide();\n            });\n\n            startassistinput.on('change blur', async function() {\n                startassistinput.removeClass('is-invalid');\n                startassistinput.next('.form-control-feedback').remove();\n                if (startassistinput.val() == '') {\n                    return;\n                }\n                var strings = await str.get_strings([\n                    {key: 'starttimelesstotaltime', component: 'mod_interactivevideo'},\n                    {key: 'starttimelessthanendtime', component: 'mod_interactivevideo'},\n                    {key: 'invalidtimestampformat', component: 'mod_interactivevideo'},\n                ]);\n                var parts = startassistinput.val().split(':');\n                var time = Number(parts[0]) * 3600 + Number(parts[1]) * 60 + Number(parts[2]);\n                startinput.val(time);\n                if (Number(startinput.val()) > totaltime) {\n                    startassistinput.addClass('is-invalid');\n                    startassistinput.after('<div class=\"form-control-feedback invalid-feedback d-inline\">'\n                        + strings[0] + '</div>');\n                    startassistinput.val(convertSecondsToHMS(totaltime));\n                } else {\n                    if (Number(endinput.val()) && Number(endinput.val()) != 0\n                        && Number(startinput.val()) > Number(endinput.val())) {\n                        startassistinput.addClass('is-invalid');\n                        startassistinput.after('<div class=\"form-control-feedback invalid-feedback d-inline\">'\n                            + strings[1] + '</div>');\n                        startassistinput.val(convertSecondsToHMS(endinput.val()));\n                    } else if (Number(startinput.val()) >= Number(endinput.val())) {\n                        endassistinput.val(convertSecondsToHMS(0));\n                    }\n                }\n            });\n\n            endassistinput.on('change blur', async function() {\n                endassistinput.removeClass('is-invalid');\n                endassistinput.next('.form-control-feedback').remove();\n                if (endassistinput.val() == '') {\n                    return;\n                }\n                var strings = await str.get_strings([\n                    {key: 'endtimelesstotaltime', component: 'mod_interactivevideo'},\n                    {key: 'endtimegreaterstarttime', component: 'mod_interactivevideo'},\n                    {key: 'invalidtimestampformat', component: 'mod_interactivevideo'},\n                ]);\n                var parts = endassistinput.val().split(':');\n                var time = Number(parts[0]) * 3600 + Number(parts[1]) * 60 + Number(parts[2]);\n                endinput.val(time);\n                if (Number(endinput.val()) > totaltime) {\n                    endassistinput.addClass('is-invalid');\n                    endassistinput.after('<div class=\"form-control-feedback invalid-feedback d-inline\">'\n                        + strings[0] + '</div>');\n                    endassistinput.val(convertSecondsToHMS(totaltime));\n                } else {\n                    if (Number(startinput.val()) && Number(endinput.val()) < Number(startinput.val())) {\n                        endassistinput.addClass('is-invalid');\n                        endassistinput.after('<div class=\"form-control-feedback invalid-feedback d-inline\">'\n                            + strings[1] + '</div>');\n                        endassistinput.val(convertSecondsToHMS(startinput.val()));\n                    } else if (Number(startinput.val()) >= Number(endinput.val())) {\n                        endassistinput.val(convertSecondsToHMS(totaltime));\n                    }\n                }\n            });\n\n            // Upload video to get draft item id.\n            $(document).on('click', '#id_upload', async function() {\n                var data = {\n                    contextid: M.cfg.contextid,\n                    id: id,\n                    usercontextid: usercontextid,\n                };\n\n                let string = await str.get_string('uploadvideo', 'mod_interactivevideo');\n                var form = new ModalForm({\n                    modalConfig: {\n                        title: string,\n                    },\n                    formClass: \"mod_interactivevideo\\\\form\\\\video_upload_form\",\n                    args: data,\n                });\n\n                form.show();\n\n                form.addEventListener(form.events.FORM_SUBMITTED, async (e) => {\n                    var url = e.detail.url;\n                    videowrapper.html('<video id=\"player\" class=\"w-100\"></video>');\n                    require(['mod_interactivevideo/player/html5video'], function(VP) {\n                        player = new VP(url, 0, null, true);\n                    });\n                    videoinput.val(e.detail.video);\n                    // Hide the upload button.\n                    uploadfield.hide();\n                    // Show the delete button.\n                    deletefield.show();\n                });\n            });\n\n            $(document).on('change', '#id_source', function() {\n                if ($(this).val() == 'file') {\n                    if (videoinput.val() == '' || videoinput.val() == '0') {\n                        uploadfield.show();\n                        deletefield.hide();\n                    } else {\n                        uploadfield.hide();\n                        deletefield.show();\n                    }\n                } else {\n                    uploadfield.hide();\n                    deletefield.hide();\n                }\n            });\n\n            $(document).on('click', '#id_delete', async function() {\n                var strings = await str.get_strings([\n                    {key: 'deletevideo', component: 'mod_interactivevideo'},\n                    {key: 'deletevideoconfirm', component: 'mod_interactivevideo'},\n                    {key: 'delete', component: 'mod_interactivevideo'},\n                ]);\n                notification.saveCancel(\n                    strings[0],\n                    strings[1],\n                    strings[2],\n                    function() {\n                        videoinput.val('');\n                        videofile.val('');\n                        videowrapper.html(\"\").hide();\n                        uploadfield.show();\n                        deletefield.hide();\n                    });\n            });\n\n            // DOM ready\n            $(function() {\n                if (videourlinput.val() != '') {\n                    videourlinput.trigger('input');\n                    uploadfield.hide();\n                    deletefield.hide();\n                }\n                if (sourceinput.val() == 'url') {\n                    uploadfield.hide();\n                    deletefield.hide();\n                } else {\n                    if (videoinput.val() != '' && videoinput.val() != '0') {\n                        uploadfield.hide();\n                        deletefield.show();\n                        var url = videofile.val();\n                        videowrapper.html('<video id=\"player\" class=\"w-100\"></video>');\n                        require(['mod_interactivevideo/player/html5video'], function(VP) {\n                            player = new VP(url, 0, null, true);\n                        });\n                    } else {\n                        uploadfield.show();\n                        deletefield.hide();\n                    }\n                }\n\n                if ($('[name=completionunlocked]').val() == '0') {\n                    $('#warning').removeClass('d-none');\n                    $('[name=videourl], [name=startassist], [name=endassist]').prop('readonly', 'true');\n                    $('#fitem_id_source, #fitem_id_delete, #fitem_id_upload').hide();\n                    $('#id_upload').prop('disabled', 'true');\n                    $('#id_delete').prop('disabled', 'true');\n                }\n            });\n\n            startassistinput.val(convertSecondsToHMS(startinput.val()));\n            endassistinput.val(convertSecondsToHMS(endinput.val()));\n\n        }\n    };\n});"],"names":["define","$","notification","ModalForm","str","id","usercontextid","totaltime","player","videowrapper","endinput","startinput","startassistinput","endassistinput","totaltimeinput","videourlinput","sourceinput","videoinput","uploadfield","deletefield","videofile","videotype","convertSecondsToHMS","s","hours","Math","floor","minutes","seconds","result","toFixed","document","on","async","show","ratio","aspectratio","css","duration","getDuration","Number","val","text","whenPlayerReady","strings","get_strings","key","component","addClass","after","removeClass","next","remove","destroy","url","this","trim","hide","regex","match","exec","html","require","VP","vid","Promise","resolve","querySelector","video","createElement","src","addEventListener","checkVideo","alert","parts","split","time","data","contextid","M","cfg","string","get_string","form","modalConfig","title","formClass","args","events","FORM_SUBMITTED","e","detail","saveCancel","trigger","prop"],"mappings":"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"}