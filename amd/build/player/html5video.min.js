define("mod_interactivevideo/player/html5video",["exports","core/event_dispatcher","jquery"],(function(_exports,_event_dispatcher,_jquery){var obj;
/**
   * HTML5 Video Player class
   *
   * @module     mod_interactivevideo/player/html5video
   * @copyright  2024 Sokunthearith Makara <sokunthearithmakara@gmail.com>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_jquery=(obj=_jquery)&&obj.__esModule?obj:{default:obj};var _default=class{constructor(url,start,end,showControls){this.type="html5video",this.start=start,this.end=end,this.frequency=.28;var player=document.getElementById("player");player.src=url,player.controls=!0,player.autoplay=!1,player.preload="metadata",player.currentTime=start,player.tabIndex=-1,this.posterImage=player.poster,showControls||(0,_jquery.default)("body").addClass("no-original-controls"),player.setAttribute("playsinline",""),player.addEventListener("loadedmetadata",(function(){(0,_event_dispatcher.dispatchEvent)("iv:playerReady"),end=end?Math.min(end,player.duration):player.duration})),player.addEventListener("seeked",(function(){(0,_event_dispatcher.dispatchEvent)("iv:playerSeek",{time:player.currentTime})})),player.addEventListener("timeupdate",(function(){player.ended||end&&player.currentTime>=end?((0,_event_dispatcher.dispatchEvent)("iv:playerEnded"),player.pause()):player.paused?(0,_event_dispatcher.dispatchEvent)("iv:playerPaused"):player.paused||(0,_event_dispatcher.dispatchEvent)("iv:playerPlaying")})),player.addEventListener("error",(function(e){(0,_event_dispatcher.dispatchEvent)("iv:playerError",{error:e})})),this.player=player}play(){this.player.play()}pause(){this.player.pause()}stop(starttime){this.player.pause(),this.player.currentTime=starttime}seek(time){return this.player.currentTime=time,Promise.resolve()}getCurrentTime(){return Promise.resolve(this.player.currentTime)}getDuration(){return Promise.resolve(this.player.duration)}isPaused(){return Promise.resolve(this.player.paused)}isPlaying(){return Promise.resolve(!this.player.paused)}isEnded(){return Promise.resolve(this.player.ended)}ratio(){return this.player.videoWidth/this.player.videoHeight>16/9?Promise.resolve(this.player.videoWidth/this.player.videoHeight):Promise.resolve(16/9)}destroy(){this.player.pause(),this.player.removeAttribute("src"),this.player.load()}getState(){return Promise.resolve(this.player.paused?"paused":"playing")}setRate(rate){this.player.playbackRate=rate}mute(){this.player.muted=!0}unMute(){this.player.muted=!1}originalPlayer(){return this.player}};return _exports.default=_default,_exports.default}));

//# sourceMappingURL=html5video.min.js.map