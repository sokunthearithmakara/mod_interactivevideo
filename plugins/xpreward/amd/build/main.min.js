define("ivplugin_xpreward/main",["exports","jquery","mod_interactivevideo/type/base"],(function(_exports,_jquery,_base){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Main class for the xpreward plugin
   *
   * @module     ivplugin_xpreward/main
   * @copyright  2024 Sokunthearith Makara <sokunthearithmakara@gmail.com>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_jquery=_interopRequireDefault(_jquery),_base=_interopRequireDefault(_base);class XpReward extends _base.default{renderContainer(annotation){(0,_jquery.default)("#video-wrapper #message").remove(),(0,_jquery.default)("#video-wrapper").append(`<div id="message" data-id="${annotation.id}"\n             class="text-white bg-transparent" style="z-index:5;">\n            </div>`)}completionCallback(annotations,thisItem){(0,_jquery.default)(`#message[data-id='${thisItem.id}'] #xpreward`).find("button").removeClass("btn-primary").addClass("btn-success"),setTimeout((()=>{this.player.play()}),1e3)}postContentRender(annotation){var self=this;(0,_jquery.default)(document).on("click",`#message[data-id='${annotation.id}'] #xpreward`,(function(e){e.preventDefault(),(0,_jquery.default)(this).find("button").prop("disabled",!0),(0,_jquery.default)(this).find("button").text(M.util.get_string("claimedxp","ivplugin_xpreward",annotation.xp)),self.toggleCompletion(annotation.id,"mark-done","automatic")}))}runInteraction(annotation){this.renderContainer(annotation),this.render(annotation).then((content=>((0,_jquery.default)(`#message[data-id='${annotation.id}']`).html('<div class="modal-body d-flex align-items-center justify-content-center">'+content+"</div>"),this.postContentRender(annotation)))).catch((()=>{}))}}return _exports.default=XpReward,_exports.default}));

//# sourceMappingURL=main.min.js.map